<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>Graph</title>

</head>
<body>
<canvas id="myCanvas" width="100%" height="700" style="border:1px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>
<script type="text/javascript">
        var dots = [%data];
        <!--var dots = ['33', '22', '63', '39', '35', '25', '25', '28', '47', '35', '38', '28', '31', '25', '60', '38', '30', '61', '53', '34', '31','43', '33', '43', '31', '30', '25', '26', '20' ];-->
        var wwidth = window.innerWidth-50;
        document.getElementById("myCanvas").width=window.innerWidth;
        var c=document.getElementById("myCanvas");
        var ctx=c.getContext("2d");
        <!--x mark-->
        for(var i=0; i<10; i++){
            var h = parseInt(600/10);
            ctx.moveTo(10,700-(i*60+100));
            ctx.font="12px Arial";
            ctx.fillText(String(i*10),10,700-(i*60+100));
        }
        <!--y mark-->
        ctx.translate(3,620);
        var w = parseInt((wwidth-30)/dots.length);
        for(var i=0; i<dots.length; i++){
            ctx.font="10px Arial"
            ctx.translate(w,0);
            ctx.rotate(90*Math.PI/180);
            ctx.fillText(dots[i][0],0,0);
            ctx.rotate(-90*Math.PI/180);
        }
        ctx.translate(-dots.length*w,-620);
        <!--Title-->
        ctx.font="20px Arial"
        ctx.fillText('Cpu Trend',parseInt(wwidth-30)/2,30);
        <!--x y-->
        ctx.beginPath();
        ctx.lineWidth=2;
        ctx.moveTo(30,600);
        ctx.lineTo(wwidth,600);
        ctx.moveTo(30,0);
        ctx.lineTo(30,600);
        ctx.stroke();

        <!--line-->
        ctx.beginPath();
        ctx.lineWidth=1;
        ctx.moveTo(30,600);
        var gap = parseInt((wwidth-30)/dots.length);
        for(var i=0; i<dots.length; i++){
            var y = 600-parseInt(dots[i][1])*6;
            var x = i*gap+30;
            ctx.lineTo(x, y);
        }
        ctx.stroke();
        <!--dots-->
        var gap = parseInt((wwidth-30)/dots.length);
        for(var i=0; i<dots.length; i++){
            ctx.beginPath();
            var y = 600-parseInt(dots[i][1])*6;
            var x = i*gap+30;
            ctx.arc( x, y, 3, 0, Math.PI*2 );
            ctx.fill();
            ctx.closePath();
        }
        <!--values-->
        var gap = parseInt((wwidth-30)/dots.length);
        for(var i=0; i<dots.length; i++){
            var y = 600-parseInt(dots[i][1])*6;
            var x = i*gap+30;
            ctx.font="10px Arial";
            ctx.fillStyle="#FF0000";
            ctx.fillText(dots[i][1]+'%',x,y-10);
        }


    </script>
</body>
</html>